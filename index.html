<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Escena 3D Morada</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background: radial-gradient(circle at center, #2a0050, #000);
    font-family: Arial, sans-serif;
}

.topText{
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    background: rgba(80,0,120,0.5);
    padding: 10px 25px;
    border-radius: 20px;
    z-index: 10;
}

.bottomBar{
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    z-index:10;
    background: rgba(60,0,100,0.6);
    padding:15px;
    border-radius:20px;
}
</style>
</head>

<body>

<div class="topText">
Te Amo Muchote Mis Ojitos Brillantes Eres La MejorðŸ’œ
</div>

<div class="bottomBar">
<audio controls>
<source src="cancion.mp3" type="audio/mp3">
</audio>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>

/* ESCENA */
const scene = new THREE.Scene();

/* CAMARA */
const camera = new THREE.PerspectiveCamera(
75,
window.innerWidth/window.innerHeight,
0.1,
1000
);
camera.position.z = 30;

/* RENDER */
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* LUZ */
const light = new THREE.PointLight(0xaa66ff, 2, 200);
light.position.set(20,20,20);
scene.add(light);

/* PLANETA */
const geo = new THREE.SphereGeometry(6, 64, 64);
const mat = new THREE.MeshStandardMaterial({
color: 0x6a00ff,
emissive: 0x220044
});
const planet = new THREE.Mesh(geo, mat);
scene.add(planet);

/* ESTRELLAS */
const starsGeo = new THREE.BufferGeometry();
const starCount = 1500;
const posArray = new Float32Array(starCount * 3);

for(let i=0;i<starCount*3;i++){
posArray[i] = (Math.random() - 0.5) * 200;
}

starsGeo.setAttribute('position', new THREE.BufferAttribute(posArray,3));

const starsMat = new THREE.PointsMaterial({
size: 0.7,
color: 0xd9b3ff
});

const stars = new THREE.Points(starsGeo, starsMat);
scene.add(stars);

/* TEXTO 3D */
function crearTexto(texto, x,y,z){
const canvas = document.createElement("canvas");
const ctx = canvas.getContext("2d");

canvas.width = 512;
canvas.height = 256;

ctx.fillStyle = "#ffffff";
ctx.font = "40px Arial";
ctx.fillText(texto, 20, 100);

const texture = new THREE.CanvasTexture(canvas);
const material = new THREE.SpriteMaterial({ map:texture });
const sprite = new THREE.Sprite(material);

sprite.position.set(x,y,z);
sprite.scale.set(10,5,1);

scene.add(sprite);
}

/* EDITA PALABRAS */
crearTexto("Te Amo MuchÃ­simo", -15, -5, 0);
crearTexto("Mi Hermosa", 15, 5, -5);
crearTexto("Mi Mundo", 0, -10, -10);

/* ðŸ’¥ EXPLOSION PARTICULAS */
function explosion(x,y,z){

const count = 300;
const geo = new THREE.BufferGeometry();
const pos = new Float32Array(count * 3);

for(let i=0;i<count;i++){
pos[i*3] = x;
pos[i*3+1] = y;
pos[i*3+2] = z;
}

geo.setAttribute("position", new THREE.BufferAttribute(pos,3));

const mat = new THREE.PointsMaterial({
size:1.5,
color:0xff99ff
});

const points = new THREE.Points(geo, mat);
scene.add(points);

/* Animar expansiÃ³n */
let speed = [];

for(let i=0;i<count;i++){
speed.push({
x:(Math.random()-0.5)*0.5,
y:(Math.random()-0.5)*0.5,
z:(Math.random()-0.5)*0.5
});
}

let t = 0;

function animateExplosion(){
t++;

const positions = points.geometry.attributes.position.array;

for(let i=0;i<count;i++){
positions[i*3]+=speed[i].x;
positions[i*3+1]+=speed[i].y;
positions[i*3+2]+=speed[i].z;
}

points.geometry.attributes.position.needsUpdate = true;

if(t<80){
requestAnimationFrame(animateExplosion);
}else{
scene.remove(points);
}
}

animateExplosion();
}

/* CLICK / TOUCH */
window.addEventListener("click", ()=> explosion(0,0,0));
window.addEventListener("touchstart", ()=> explosion(0,0,0));

/* CAMARA MOVIMIENTO */
let mouseX = 0;
let mouseY = 0;

document.addEventListener("mousemove", e=>{
mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
});

document.addEventListener("touchmove", e=>{
mouseX = (e.touches[0].clientX / window.innerWidth - 0.5) * 2;
mouseY = (e.touches[0].clientY / window.innerHeight - 0.5) * 2;
});

/* LOOP */
function animate(){
requestAnimationFrame(animate);

planet.rotation.y += 0.003;

camera.position.x += (mouseX * 10 - camera.position.x) * 0.05;
camera.position.y += (-mouseY * 10 - camera.position.y) * 0.05;

camera.lookAt(scene.position);

renderer.render(scene, camera);
}
animate();

/* RESPONSIVE */
window.addEventListener("resize", ()=>{
camera.aspect = window.innerWidth/window.innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(window.innerWidth, window.innerHeight);
});

</script>

</body>
</html>